<html>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="../utils/jquery-csv.js"></script>

	<script src="../utils/tetris-fumen.js"></script>
	<script type="text/javascript" src="../utils/LZWEncoder.js"></script>
	<script type="text/javascript" src="../utils/NeuQuant.js"></script>
	<script type="text/javascript" src="../utils/GIFEncoder.js"></script>
	<script type="text/javascript" src="../utils/b64.js"></script>

    <script src="../utils/mirrorFumen.js"></script>
	<script src="../utils/unglueFumen.js"></script>
	<script src="../utils/fumen-render.js"></script>
	<script defer src="./cover_visualizer.js"></script>

    <link rel="stylesheet" type="text/css" href="../cover_visualizer.css" />

	<head>
		<title>Reliable TSD</title>
	</head>
	<body>
		<h1>Reliable TSD</h1>
		This is a setup that exists. Some other resources: <a href="https://docs.google.com/spreadsheets/d/1BOgwJocxAjYygr6N4Na72mb0HJ1pvAj_NMBTFlJN_80/">this sheet</a>; the <a href="https://hse30.tistory.com/461?category=748214">KR Wiki page</a>; the <a href="https://tetrisopener.wicurio.com/index.php?%E3%83%AA%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%96%E3%83%ABTSD">JP Wiki page</a>; this <a href="https://tinyurl.com/reliable-tsd-simplifed">fumen</a>. 
        <br>
            <br>
        Reliable TSD has various paths. Originally there was a 100% 3 TSD path into a 7-2 board state. In recency, an 85% bag2 path leading to STSD has been popular. This path can branch into a 5-bag PC loop; it can branch into <a href="../reliable_mechanical">a mech TSD path</a>; it can go into midgame 6-3 freestyle; it can go into a counterspike path.
	</body>
	<br />
	<br />

    <input type="checkbox" id="mirror" name="mirror" value = false />
	<label for="mirror"> Mirror</label>

    <br>
    <br>
    Bag 1 resembles a TKI shape. Mainly built with early L_tetraminoJ_tetramino bags. L_tetramino before S_tetramino and either J_tetramino or I_tetramino before Z_tetramino. Some spins allow some unintuitive placements for <a href="https://t1.daumcdn.net/cfile/tistory/99B843375CF9EB3117">I_tetramino after J_tetramino</a> or <a href="https://t1.daumcdn.net/cfile/tistory/99162F505CF9ECB013">J_tetramino after I_tetraminoZ_tetraminoO_tetramino</a> (see KR wiki gifs). 54.44% cover or 64.44% including the mirror.
    <br>
    <br>

	<label for="bag 1 files">Load bag 1 setup:</label>
	<select id="bag 1 files" name="bag 1 files"></select>
	<button type="button" onclick="loadIncludedFile(1)">Load</button>

	<div id="setup 1 preview"></div>
	<br />
	See which queues apply to which setups.
	<br />
	<br />

	Queue:
	<input type="text" id="bag 1 queue" />
	<br />
	<br />
	<div id="container 1"></div>
    <br />

    Bag 2 uses O_tetramino and S_tetramino to setup the TSD and a box on the side. ~85% coverage. There is an alternative 100% fallback that splits later in its path.
    <br>
    <br>
    Some tips for building a box out of L_tetraminoZ_tetraminoJ_tetraminoI_tetramino:
    <br>
    The box consists of a 3x4 L_tetraminoZ_tetraminoJ_tetramino, either vertical or horizontal, and either a vertical I on the left/right or horizontal I on the top/bottom.
    <br>
    For Z_tetramino between L_tetramino and J_tetramino (L_tetraminoZ_tetraminoJ_tetramino or J_tetraminoZ_tetraminoL_tetramino), <a href="https://harddrop.com/fumen/?v115@RgilwhFeglAtg0whFeBtg0whFeAth0whRpHeRpDeh0?AtwhA8CeR4g0BtwhB8AeR4A8g0AtglwhB8BeB8ilwhJeAgH?">you can build a vertical box</a>.
    <br>
    For Z_tetramino after L_tetramino and J_tetramino (L_tetraminoJ_tetraminoZ_tetramino or J_tetraminoL_tetraminoZ_tetramino), with very early or late I_tetramino, you can set up a <a href="https://harddrop.com/fumen/?v115@zgRpHeRpFehlA8CeR4g0BeglB8AeR4A8i0glB8BeB8?zhJe89mvhAkif">horizontal box and do a Z_tetramino spin</a>. Note that J_tetramino can be spun in after L_tetramino also. Note again that I_tetramino needs to come early to be placed at the bottom or late to be placed at the top. If I_tetramino doesn't come late enough, there exists <a href="https://harddrop.com/fumen/?v115@ogwhIewhRpGewhRpGewhA8CeR4BthlB8AeR4A8g0Bt?glB8BeB8i0glJeAgl">this thing</a>, but it leads to a different board state and you'll have to freestyle after it.
    <br>
    For Z_tetramino before J_tetramino and L_tetramino, for early I_tetramino or late S_tetramino, <a href="https://harddrop.com/fumen/?v115@zgRpHeRpEei0A8CeR4AeBtg0B8AeR4A8BeBtB8BeB8?zhJeaHnvhAKnf">you can do a horizontal box and 180 the L_tetramino</a>.
    <br>
    For Z_tetraminoJ_tetraminoL_tetramino, with late I_tetramino, you can do a vertical box and <a href="https://harddrop.com/fumen/?v115@zgRpHeRpHeA8CeR4AeAtBeB8AeR4A8BtBeB8BeB8At?Me+NnvhAetBDhilwhFeglBewhIewhIewhJeAAA">tuck the J_tetramino</a>.
    <br>
    For Z_tetraminoJ_tetramino and very late L_tetramino, you can do <a href="https://harddrop.com/fumen/?v115@zgRpHeRpHeA8CeR4i0AeB8AeR4A8Btg0AeB8BeB8Ae?BtKepIJ">this dono</a> and place L_tetramino after the TSD.
    <br>
    <br>
    85% is NOT 100% so there ARE cases where you simply will not be able to build the box and TSD and will have to take another path.
    <br>
    <br>



    <label for="bag 2 files">Load bag 2 setup:</label>
	<select id="bag 2 files" name="bag 2 files"></select>
	<button type="button" onclick="loadIncludedFile(2)">Load</button>

	<div id="setup 2 preview"></div>
	<br />
	See which queues apply to which setups.
	<br />
	<br />

	Queue:
	<input type="text" id="bag 2 queue" />
	<br />
	<br />
	<div id="container 2"></div>
    <br />

    Bag 3 STSD path, you just build the STSD with S_tetraminoZ_tetramino and an L_tetraminoO_tetraminoJ_tetramino box. Fallback path uses an L_tetraminoJ_tetramino congruency dono. Note that the STSD can fail with garbage in col 3.
    <br>
    Finesse tips for awkward placements:
    <br>
    Fallback path, Z_tetramino after S_tetramino: <a href="https://t1.daumcdn.net/cfile/tistory/99EE41455CF9F6E534">this gif</a> helps.
    <br>
    STSD path late Z_tetramino: ccw, sd, cw.
	<br>
	For the vert I field, STSD is not 100%. Some STSD builds are included here (some questionable), hitting ~85-95%. For something guaranteed, a J_tetramino > Z_tetramino and Z_tetramino > J_tetramino set is included.
    <br>
    <br>
    <label for="bag 3 files">Load bag 3 setup:</label>
	<select id="bag 3 files" name="bag 3 files"></select>
	<button type="button" onclick="loadIncludedFile(3)">Load</button>

	<div id="setup 3 preview"></div>
	<br />
	See which queues apply to which setups.
	<br />
	<br />

	Queue:
	<input type="text" id="bag 3 queue" />
	<br />
	<br />
	<div id="container 3"></div>
    
    <br />
    Bag 4 STSD path, you can set up for 5 bag PC loop with an O_tetraminoS_tetraminoZ_tetramino congruency, or you can set up for mech TSD. Fallback path has various branching builds from here.
    <br>
    With hold, O_tetraminoS_tetraminoZ_tetramino ball can be built on any queue. If you want to keep bag3 T_tetramino in hold to send the STSD in a combo, it may not. 
    <br>
    You can also start freestyle stacking to downstack opponent garbage, or you can start upstacking 3-6. Followups include more STSD, or mech TSD setup. Two mech TSD setups are provided here with 74% cumulative cover.
    <br>
    <br>
    Bag 4 fallback path, there are various somewhat freestyle 7-2 upstack paths. Examples here are WIP; see more on the <a href="https://hse30.tistory.com/461?category=748214">KR wiki</a>.
    <br>
    <br>
    <label for="bag 4 files">Load bag 4 setup:</label>
	<select id="bag 4 files" name="bag 4 files"></select>
	<button type="button" onclick="loadIncludedFile(4)">Load</button>

	<div id="setup 4 preview"></div>
	<br />
	See which queues apply to which setups.
	<br />
	<br />

	Queue:
	<input type="text" id="bag 4 queue" />
	<br />
	<br />
	<div id="container 4"></div>
    <br />

    <br />
    Bag 5 STSD PC path, there are 5 minimals with a 91.9% PC chance.
    <br>
    Some tips for learning these solutions:
    <br>
    In the well, all solutions use T_tetramino skim into S_tetramino skim, L_tetramino skim into S_tetramino skim, or Z_tetramino skim into S_tetramino skim. So if you have relatively early S_tetramino and can take these two skims unobstructed, you have PC.
    <br>
    The sides are filled in with O_tetramino on the left on 4 of the solutions and J_tetraminoI_tetramino on the right on 3 of the solutions. There's also the less common L_tetramino on the right in 2 of the solutions.
    <br>
    If you can do the skims in the well and fill in the sides, the rest of the solution is usually intuitive. If you don't see early S_tetramino, sometimes you can skim the top away but you may want to just transition to freestyle.
    <br>
    <br>
    Bag 5 mech TSD path: complete the S_tetraminoL_tetramino chipped tooth and start the mech TSD pattern. Path a has 63.33% success; Path b has 50% succcess. If bag 5 is successful the rest of the 20TSD is 100% guaranteed. See <a href="https://www.youtube.com/watch?v=1p5kBiYpvh8">this video</a> for a demonstration.
    <br>
    <br>
    Bag 5 fallback path you generally just freestyle.
    <br>
    <br>
    <label for="bag 5 files">Load bag 5 setup:</label>
	<select id="bag 5 files" name="bag 5 files"></select>
	<button type="button" onclick="loadIncludedFile(5)">Load</button>

	<div id="setup 5 preview"></div>
	<br />
	See which queues apply to which setups.
	<br />
	<br />

	Queue:
	<input type="text" id="bag 5 queue" />
	<br />
	<br />
	<div id="container 5"></div>
    <br />

    Bag 6+ mech TSD path. Um, you follow the mech v2 pattern.
    <br>
    <br>

	<label for="bag 6 files">Load bag 6 setup:</label>
	<select id="bag 6 files" name="bag 6 files"></select>
	<button type="button" onclick="loadIncludedFile(6)">Load</button>

	<div id="setup 6 preview"></div>
	<br />
	See which queues apply to which setups.
	<br />
	<br />

	Queue:
	<input type="text" id="bag 6 queue" />
	<br />
	<br />
	<div id="container 6"></div>
    <br />

</html>
